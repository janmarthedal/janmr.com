---
layout: wppost
title: An Infinite Series Involving a Sideways Sum
author: Jan Marthedal Rasmussen
excerpt: ! "I found a recent question on Mathematics Stack Exchange
  quite interesting. It simply asked: How does one easily calculate ..."
date: 2013-07-03 08:56:35.000000000 +02:00
categories:
- mathematics
tags:
- infinite series
- binary numbers
- stackexchange
- nerd-sniping
- sideways sum
---
<p>I found a recent <a href="http://math.stackexchange.com/questions/432250/how-does-one-easily-calculate-sum-limits-n-1-infty-frac-mathrmpopn">question</a> on <a href="http://math.stackexchange.com">Mathematics Stack Exchange</a> quite interesting. It simply asked</p>
<blockquote><p>
How does one easily calculate \(\sum\limits_{n=1}^\infty\frac{\mathrm{pop}(n)}{n(n+1)}\) ?
</p></blockquote>
<p>Here \(\mathrm{pop}(n)\) denotes the &#8220;population count&#8221; or &#8220;sideways sum&#8221;, which is the number of 1s in the binary representation of \(n\) (<a href="http://oeis.org/A000120">A000120</a>).</p>
<span></span>
<p>The user <a href="http://math.stackexchange.com/users/59379/achille-hui">achille hui</a> provided a <a href="http://math.stackexchange.com/a/432336/2043">very nice answer</a> which I would like to describe in some detail here. First, he introduces the function
\[
\theta_k(n) = \begin{cases}1,&#038;\text{ if the $k$th bit of $n$ is set,}\\0,&#038;\text{ otherwise.}\end{cases}
\]
which makes it possible to write the series as
\[
\sum_{n=1}^\infty\frac{\mathrm{pop}(n)}{n(n+1)} = \sum_{n=1}^\infty \sum_{k=0}^\infty \frac{\theta_k(n)}{n(n+1)} = \sum_{k=0}^\infty \sum_{n=1}^\infty \frac{\theta_k(n)}{n(n+1)}.
\]
After reversing the order of summation (which requires <a href="http://www.math.ubc.ca/~feldman/m321/twosum.pdf">justification</a>), he asks: For fixed \(k\), which values of \(n\) has \(\theta_k(n)=1\)? Note here that \(n\) has the \(k\)th bit set if and only if \(\lfloor n/2^k \rfloor\) has the zeroth bit set. And a number has the zeroth bit set if and only if that number is odd. So \(\theta_k(n)=1\) if and only if \(\lfloor n/2^k \rfloor = 2 l + 1\) for some \(l = 0, 1, 2, \ldots\). This means
\[
\begin{aligned}
\theta_k(n)=1 \quad&#038;\Leftrightarrow\quad 2 l + 1 \leq n/2^k < 2 l + 2 \\
&#038;\Leftrightarrow\quad (2 l + 1) 2^k \leq n \leq (2 l + 2) 2^k - 1,
\end{aligned}
\]
for some \(l = 0, 1, 2, \ldots\). This provides us with the intervals of \(n\) that we are interested in, so we have
\[
\begin{aligned}
\sum_{n=1}^\infty\frac{\mathrm{pop}(n)}{n(n+1)}
 &#038;= \sum_{k=0}^\infty \sum_{n=1}^\infty \frac{\theta_k(n)}{n(n+1)} \\
 &#038;= \sum_{k=0}^\infty \sum_{l=0}^\infty \sum_{n=(2 l + 1) 2^k}^{(2 l + 2) 2^k - 1} \frac{1}{n(n+1)} \\
 &#038;= \sum_{k=0}^\infty \sum_{l=0}^\infty \sum_{n=(2 l + 1) 2^k}^{(2 l + 2) 2^k - 1} \left( \frac{1}{n} - \frac{1}{n+1} \right) \\
 &#038;= \sum_{k=0}^\infty \sum_{l=0}^\infty \left( \frac{1}{(2 l + 1) 2^k} - \frac{1}{(2 l + 2) 2^k} \right) \\
 &#038;= \left( \sum_{k=0}^\infty 2^{-k} \right) \left( \sum_{m=1}^\infty (-1)^{m+1} \frac{1}{m} \right) \\
 &#038;= 2 \ln 2
\end{aligned}
\]
Here, both a <a href="http://en.wikipedia.org/wiki/Telescoping_series">telescoping sum</a>, a geometric progression sum (see <a href="/2008/10/nice-geometric-progression-proof.html">Nice Proof of a Geometric Progression Sum</a> with \(r=1/2\)) and the <a href="https://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions">power series</a> for the natural logarithm of 2 occurs.</p>
<p>Very nice.</p>
